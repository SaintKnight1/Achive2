@startuml
class Actor {
Отправляет HTTP POST запросы на сервер через REST API.
В запросе передается натуральное число number, которое подлежит обработке.
}

class WebServer {
Получает HTTP POST запросы от клиента.
Передает запрос на сервер приложений (Application Server) через REST API.
Получает ответ от сервера приложений (успешный результат или ошибку) и возвращает его клиенту.
Поддерживает форматирование ответов для клиента (успешный ответ или JSON с описанием ошибки)
}

class ApplicationServer {
Обрабатывает запросы, поступающие от веб-сервера.
Выполняет проверку числа:
     - Проверяет, является ли число уникальным, т.е. еще не обраблотанным.
     - Проверяет, не является ли число меньше на единицу от уже обработанного.
Если число уникальное:
     - Сохраняет его в базе данных.
     - Возвращает число, увеличенное на 1.
Если есть ошибка:
     - Логирует ошибку в базе данных.
     - Возвращает соответствующее описание ошибки веб-серверу.
}

class Database {
Содержит две основные таблицы:
- Таблица Numbers, где хранятся уникальные обработанные числа.
- Таблица ErrorLogs, где записываются логи ошибок.
Выполняет следующие функции:
- Проверяет наличие числа в таблице Numbers.
- Сохраняет уникальные числа.
- Логирует ошибки через SQL INSERT.
- Извлекает последние логи ошибок для их передачи клиенту.
}

Actor -down-> WebServer : - Отправляется HTTP POST запрос с числом.
WebServer -down-> ApplicationServer : - Передается REST POST запрос с числом для дальнейшей обработки.
ApplicationServer -left-> Database : - Выполняется SQL SELECT для проверки числа в таблице Numbers. - При необходимости выполняется SQL INSERT для сохранения нового числа или логирования ошибки.
Database -right-> ApplicationServer : - Возвращает результат проверки (число уже существует, корректная последовательность или ошибка).
ApplicationServer -up-> WebServer : - Возвращает успешный результат (число + 1) или описание ошибки.
WebServer -left-> Actor : - Возвращает HTTP 200 с результатом или HTTP 400 с JSON-описанием ошибки.
@enduml